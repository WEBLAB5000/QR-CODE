<!DOCTYPE html>
<html>
  <head><link rel="stylesheet" href="style.css"><head>
    <meta charset="UTF-8">
    <title>QR Code Generator</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.min.js"></script>

  </head>
  <body>
      <h1>QR Code Generator</h1>
      <form>
        <label for="input">Enter data to encode:</label><br>
        <input type="text" id="input" name="input"><br>
        <button type="button" onclick="generateQR()">Generate QR Code</button>
      </form>
      <br>
      <div id="qrcode"></div>

    <script>
      function generateQR() {
        var qr = qrcode(0, 'L');
        qr.addData(document.getElementById('input').value);
        qr.make();
        document.getElementById('qrcode').innerHTML = qr.createImgTag();
      }
    </script>

    <!-- create a video input where it uses camera to scan QR code and show the content of the QR code, make it continuously scanning-->
    <br>
    <h2>Scan QR Code</h2>
    <video id="video" width="400" height="300"></video>
    <script>
      var video = document.getElementById("video");

      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
          video.srcObject = stream;
          video.play();
        });
      }

      var canvas = document.createElement("canvas");
      canvas.width = 400;
      canvas.height = 300;
      var ctx = canvas.getContext("2d");

      setInterval(function() {
        ctx.drawImage(video, 0, 0, 400, 300);
        var imageData = ctx.getImageData(0, 0, 400, 300);
        var code = jsQR(imageData.data, imageData.width, imageData.height, {
          inversionAttempts: "dontInvert",
        });
        if (code) {
          document.getElementById("output").innerHTML = code.data;
        }
        }, 500);


    </script>
    <div id="output"></div>
 Â </body>
</html>